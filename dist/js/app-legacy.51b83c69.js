(function(){var t={2767:function(t,e,n){function r(){return localStorage["favourites"]?JSON.parse(localStorage["favourites"]):[]}function a(t,e){return localStorage["favourites"]?JSON.parse(localStorage["favourites"]).splice(t,e):[]}n(561),t.exports.o=a,t.exports.u=r},5539:function(t,e,n){"use strict";n(6992),n(8674),n(9601),n(7727);var r=n(8935),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("nav-bar"),n("router-view")],1)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav-wrapper"},[n("div",{staticClass:"container"},[n("nav",{staticClass:"nav"},[n("ul",[n("li",{class:{active:"all"==t.isActive},on:{click:function(e){t.isActive="all"}}},[n("router-link",{attrs:{to:"/"}},[t._v("Все котики")])],1),n("li",{class:{active:"favourite"==t.isActive},on:{click:function(e){t.isActive="favourite"}}},[n("router-link",{attrs:{to:"/favourite"}},[t._v("Любимые котики")])],1)])])])])},s=[],c={data:function(){return{isActive:"all"}}},u=c,l=n(1001),f=(0,l.Z)(u,o,s,!1,null,null,null),d=f.exports,v={name:"HomeView",components:{NavBar:d}},h=v,p=(0,l.Z)(h,a,i,!1,null,null,null),m=p.exports,g=n(2809),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("cats-list",{attrs:{cats:t.cats,isLoading:t.isLoading}})},b=[],x=n(7906),k=n(6198),C=(n(1539),n(1703),n(7941),n(4747),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"cats-grid"},[t._l(t.cats,(function(e){return n("figure",{key:e.id,staticClass:"cat-item"},[n("img",{staticClass:"cat-img",attrs:{src:e.url}}),n("font-awesome-icon",{staticClass:"heart-img",attrs:{icon:e.isFavourite?"fa-solid fa-heart":"fa-regular fa-heart"},on:{click:function(n){return t.changeFavourite(e)}}})],1)})),t.cats?t._e():n("div",[t._v("Нет фото котиков :(")])],2),t.isLoading?n("div",{staticClass:"cats-loading"},[t._v("... загружаем еще котиков ...")]):t._e()])}),Z=[],L=(n(4553),n(561),n(8862),n(2767)),_={props:["cats","isLoading"],mounted:function(){var t=(0,L.u)();this.cats.forEach((function(e){t.some((function(t){return t.id===e.id}))?e.isFavourite=!0:e.isFavourite=!1}))},methods:{changeFavourite:function(t){t.isFavourite=!t.isFavourite,this.$forceUpdate();var e=(0,L.u)();if(e.some((function(e){return e.id===t.id}))){var n=e.findIndex((function(e){return e.id===t.id}));e.splice(n,1)}else e.push(t);localStorage["favourites"]=JSON.stringify(e)}}},E=_,y=(0,l.Z)(E,C,Z,!1,null,null,null),O=y.exports,F={apikey:"d80ca028-0d0d-4bb2-9f25-c55a9d399ee6"},j={name:"HomeView",data:function(){return{cats:[],page:1,isLoading:!1,shouldLoad:!0}},components:{CatsList:O},mounted:function(){this.scroll(),this.getAllCats()},methods:{scroll:function(){var t=this;window.onscroll=function(){var e=document.documentElement.scrollTop+document.documentElement.clientHeight,n=document.documentElement.scrollHeight,r=n-e;r<1&&t.fetchCats()}},fetchCats:function(){var t=this;return(0,k.Z)((0,x.Z)().mark((function e(){return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isLoading&&t.shouldLoad){e.next=2;break}return e.abrupt("return");case 2:return t.isLoading=!0,t.page++,e.next=6,t.getAllCats();case 6:t.isLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},getAllCats:function(){var t=this;return(0,k.Z)((0,x.Z)().mark((function e(){var n,r;return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.thecatapi.com/v1/images/search?page=".concat(t.page,"&limit=20"),{method:"GET",headers:{"X-API-KEY":F.apikey,"Content-Type":"application/json"}});case 3:if(n=e.sent,n.ok){e.next=6;break}throw new Error(n.statusText);case 6:return e.next=8,n.json();case 8:r=e.sent,Object.keys(r).length||(t.shouldLoad=!1),r.forEach((function(e){return t.cats.push(e)})),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()}}},A=j,S=(0,l.Z)(A,w,b,!1,null,null,null),T=S.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("cats-list",{attrs:{cats:t.favouriteCats,isLoading:t.isLoading}})},H=[],N={name:"FavouriteView",data:function(){return{favouriteCats:[],start:0,end:19,isLoading:!1,shouldLoad:!0}},components:{CatsList:O},mounted:function(){this.favouriteCats=(0,L.o)(this.start,this.end),this.scroll()},methods:{scroll:function(){var t=this;window.onscroll=function(){var e=document.documentElement.scrollTop+document.documentElement.clientHeight,n=document.documentElement.scrollHeight,r=n-e;r<1&&t.fetchFavourite()}},fetchFavourite:function(){var t=this;return(0,k.Z)((0,x.Z)().mark((function e(){return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isLoading&&t.shouldLoad){e.next=2;break}return e.abrupt("return");case 2:return t.isLoading=!0,t.start+=20,t.end+=20,e.next=7,t.getFavouriteCats();case 7:t.isLoading=!1;case 8:case"end":return e.stop()}}),e)})))()},getFavouriteCats:function(){var t=this;return(0,k.Z)((0,x.Z)().mark((function e(){var n;return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,L.o)(t.start,t.end);case 2:n=e.sent,(Object.keys(n).length<t.end-t.start||!Object.keys(n).length)&&(t.shouldLoad=!1),n.forEach((function(e){return t.favouriteCats.push(e)}));case 5:case"end":return e.stop()}}),e)})))()}}},I=N,J=(0,l.Z)(I,$,H,!1,null,null,null),P=J.exports;r.Z.use(g.Z);var V=[{path:"/",name:"home",component:T},{path:"/favourite",name:"favourite",component:P}],G=new g.Z({mode:"history",base:"/frontend-challenge/",routes:V}),B=G,K=n(81),M=n(6978),U=n(2739),X=n(9009);K.vI.add(M.m6i,U.m6i),r.Z.component("font-awesome-icon",X.GN),r.Z.config.productionTip=!1,new r.Z({router:B,render:function(t){return t(m)}}).$mount("#app")}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,r,a,i){if(!r){var o=1/0;for(l=0;l<t.length;l++){r=t[l][0],a=t[l][1],i=t[l][2];for(var s=!0,c=0;c<r.length;c++)(!1&i||o>=i)&&Object.keys(n.O).every((function(t){return n.O[t](r[c])}))?r.splice(c--,1):(s=!1,i<o&&(o=i));if(s){t.splice(l--,1);var u=a();void 0!==u&&(e=u)}}return e}i=i||0;for(var l=t.length;l>0&&t[l-1][2]>i;l--)t[l]=t[l-1];t[l]=[r,a,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var a,i,o=r[0],s=r[1],c=r[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(c)var l=c(n)}for(e&&e(r);u<o.length;u++)i=o[u],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(l)},r=self["webpackChunkcats"]=self["webpackChunkcats"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(5539)}));r=n.O(r)})();
//# sourceMappingURL=app-legacy.51b83c69.js.map