(function(){var t={2767:function(t){function e(){return localStorage["favourites"]?JSON.parse(localStorage["favourites"]):[]}function o(t,e){return console.log(JSON.parse(localStorage["favourites"])),localStorage["favourites"]?JSON.parse(localStorage["favourites"]).splice(t,e):[]}t.exports.o=o,t.exports.u=e},9982:function(t,e,o){"use strict";var i=o(8935),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("nav-bar"),o("router-view")],1)},s=[],a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"nav-wrapper"},[o("div",{staticClass:"container"},[o("nav",{staticClass:"nav"},[o("ul",[o("li",{class:{active:"all"==t.isActive},on:{click:function(e){t.isActive="all"}}},[o("router-link",{attrs:{to:"/"}},[t._v("Все котики")])],1),o("li",{class:{active:"favourite"==t.isActive},on:{click:function(e){t.isActive="favourite"}}},[o("router-link",{attrs:{to:"/favourite"}},[t._v("Любимые котики")])],1)])])])])},r=[],c={data(){return{isActive:"all"}}},l=c,u=o(1001),d=(0,u.Z)(l,a,r,!1,null,null,null),f=d.exports,h={name:"HomeView",components:{NavBar:f}},v=h,p=(0,u.Z)(v,n,s,!1,null,null,null),m=p.exports,g=o(2809),w=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("cats-list",{attrs:{cats:t.cats,isLoading:t.isLoading}})},C=[],y=(o(1703),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"cats-grid"},[t._l(t.cats,(function(e){return o("figure",{key:e.id,staticClass:"cat-item"},[o("img",{staticClass:"cat-img",attrs:{src:e.url}}),o("font-awesome-icon",{staticClass:"heart-img",attrs:{icon:e.isFavourite?"fa-solid fa-heart":"fa-regular fa-heart"},on:{click:function(o){return t.changeFavourite(e)}}})],1)})),t.cats?t._e():o("div",[t._v("Нет фото котиков :(")])],2),t.isLoading?o("div",{staticClass:"cats-loading"},[t._v("... загружаем еще котиков ...")]):t._e()])}),L=[],b=o(2767),_={props:["cats","isLoading"],mounted(){const t=(0,b.u)();this.cats.forEach((e=>{t.some((t=>t.id===e.id))?e.isFavourite=!0:e.isFavourite=!1}))},methods:{changeFavourite(t){t.isFavourite=!t.isFavourite,this.$forceUpdate();const e=(0,b.u)();if(e.some((e=>e.id===t.id))){const o=e.findIndex((e=>e.id===t.id));e.splice(o,1)}else e.push(t);localStorage["favourites"]=JSON.stringify(e)}}},E=_,O=(0,u.Z)(E,y,L,!1,null,null,null),k=O.exports,x={apikey:"d80ca028-0d0d-4bb2-9f25-c55a9d399ee6"},F={name:"HomeView",data(){return{cats:[],page:1,isLoading:!1,shouldLoad:!0}},components:{CatsList:k},mounted(){this.scroll(),this.getAllCats()},methods:{scroll(){window.onscroll=()=>{const t=document.documentElement.scrollTop+document.documentElement.clientHeight,e=document.documentElement.scrollHeight,o=e-t;o<1&&this.fetchCats()}},async fetchCats(){!this.isLoading&&this.shouldLoad&&(this.isLoading=!0,this.page++,await this.getAllCats(),this.isLoading=!1)},async getAllCats(){try{const t=await fetch(`https://api.thecatapi.com/v1/images/search?page=${this.page}&limit=20`,{method:"GET",headers:{"X-API-KEY":x.apikey,"Content-Type":"application/json"}});if(!t.ok)throw new Error(t.statusText);const e=await t.json();Object.keys(e).length||(this.shouldLoad=!1),e.forEach((t=>this.cats.push(t))),console.log(this.cats)}catch(t){console.log(t)}}}},Z=F,j=(0,u.Z)(Z,w,C,!1,null,null,null),S=j.exports,A=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("cats-list",{attrs:{cats:t.favouriteCats}})},T=[],$={name:"FavouriteView",data(){return{favouriteCats:[],start:0,end:19,isLoading:!1,shouldLoad:!0}},components:{CatsList:k},mounted(){this.favouriteCats=(0,b.o)(this.start,this.end),this.scroll()},methods:{scroll(){window.onscroll=()=>{const t=document.documentElement.scrollTop+document.documentElement.clientHeight,e=document.documentElement.scrollHeight,o=e-t;o<1&&this.fetchFavourite()}},async fetchFavourite(){!this.isLoading&&this.shouldLoad&&(this.isLoading=!0,this.start+=20,this.end+=20,await this.getFavouriteCats(),this.isLoading=!1)},getFavouriteCats(){const t=(0,b.o)(this.start,this.end);Object.keys(t).length||(this.shouldLoad=!1),t.forEach((t=>this.favouriteCats.push(t)))}}},H=$,N=(0,u.Z)(H,A,T,!1,null,null,null),J=N.exports;i.Z.use(g.Z);const I=[{path:"/",name:"home",component:S},{path:"/favourite",name:"favourite",component:J}],P=new g.Z({mode:"history",base:"/",routes:I});var V=P,G=o(81),B=o(6978),K=o(2739),M=o(9009);G.vI.add(B.m6i,K.m6i),i.Z.component("font-awesome-icon",M.GN),i.Z.config.productionTip=!1,new i.Z({router:V,render:t=>t(m)}).$mount("#app")}},e={};function o(i){var n=e[i];if(void 0!==n)return n.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,o),s.exports}o.m=t,function(){var t=[];o.O=function(e,i,n,s){if(!i){var a=1/0;for(u=0;u<t.length;u++){i=t[u][0],n=t[u][1],s=t[u][2];for(var r=!0,c=0;c<i.length;c++)(!1&s||a>=s)&&Object.keys(o.O).every((function(t){return o.O[t](i[c])}))?i.splice(c--,1):(r=!1,s<a&&(a=s));if(r){t.splice(u--,1);var l=n();void 0!==l&&(e=l)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[i,n,s]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,s,a=i[0],r=i[1],c=i[2],l=0;if(a.some((function(e){return 0!==t[e]}))){for(n in r)o.o(r,n)&&(o.m[n]=r[n]);if(c)var u=c(o)}for(e&&e(i);l<a.length;l++)s=a[l],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(u)},i=self["webpackChunkcats"]=self["webpackChunkcats"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=o.O(void 0,[998],(function(){return o(9982)}));i=o.O(i)})();
//# sourceMappingURL=app.9099a28e.js.map