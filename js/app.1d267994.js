(function(){var t={2767:function(t){function e(){return localStorage["favourites"]?JSON.parse(localStorage["favourites"]):[]}function n(t,e){return console.log(JSON.parse(localStorage["favourites"])),localStorage["favourites"]?JSON.parse(localStorage["favourites"]).splice(t,e):[]}t.exports.o=n,t.exports.u=e},6653:function(t,e,n){"use strict";var i=n(8935),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("nav-bar"),n("router-view")],1)},a=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav-wrapper"},[n("div",{staticClass:"container"},[n("nav",{staticClass:"nav"},[n("ul",[n("li",{class:{active:"all"==t.isActive},on:{click:function(e){t.isActive="all"}}},[n("router-link",{attrs:{to:"/"}},[t._v("Все котики")])],1),n("li",{class:{active:"favourite"==t.isActive},on:{click:function(e){t.isActive="favourite"}}},[n("router-link",{attrs:{to:"/favourite"}},[t._v("Любимые котики")])],1)])])])])},r=[],c={data(){return{isActive:"all"}}},l=c,u=n(1001),d=(0,u.Z)(l,s,r,!1,null,null,null),f=d.exports,h={name:"HomeView",components:{NavBar:f}},v=h,p=(0,u.Z)(v,o,a,!1,null,null,null),m=p.exports,g=n(2809),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("cats-list",{attrs:{cats:t.cats,isLoading:t.isLoading}})},C=[],y=(n(1703),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"cats-grid"},[t._l(t.cats,(function(e){return n("figure",{key:e.id,staticClass:"cat-item"},[n("img",{staticClass:"cat-img",attrs:{src:e.url}}),n("font-awesome-icon",{staticClass:"heart-img",attrs:{icon:e.isFavourite?"fa-solid fa-heart":"fa-regular fa-heart"},on:{click:function(n){return t.changeFavourite(e)}}})],1)})),t.cats?t._e():n("div",[t._v("Нет фото котиков :(")])],2),t.isLoading?n("div",{staticClass:"cats-loading"},[t._v("... загружаем еще котиков ...")]):t._e()])}),L=[],b=n(2767),_={props:["cats","isLoading"],mounted(){const t=(0,b.u)();this.cats.forEach((e=>{t.some((t=>t.id===e.id))?e.isFavourite=!0:e.isFavourite=!1}))},methods:{changeFavourite(t){t.isFavourite=!t.isFavourite,this.$forceUpdate();const e=(0,b.u)();if(e.some((e=>e.id===t.id))){const n=e.findIndex((e=>e.id===t.id));e.splice(n,1)}else e.push(t);localStorage["favourites"]=JSON.stringify(e)}}},E=_,O=(0,u.Z)(E,y,L,!1,null,null,null),k=O.exports,x={apikey:"d80ca028-0d0d-4bb2-9f25-c55a9d399ee6"},F={name:"HomeView",data(){return{cats:[],page:1,isLoading:!1,shouldLoad:!0}},components:{CatsList:k},mounted(){this.scroll(),this.getAllCats()},methods:{scroll(){window.onscroll=()=>{const t=document.documentElement.scrollTop+document.documentElement.clientHeight,e=document.documentElement.scrollHeight,n=e-t;n<1&&this.fetchCats()}},async fetchCats(){!this.isLoading&&this.shouldLoad&&(this.isLoading=!0,this.page++,await this.getAllCats(),this.isLoading=!1)},async getAllCats(){try{const t=await fetch(`https://api.thecatapi.com/v1/images/search?page=${this.page}&limit=20`,{method:"GET",headers:{"X-API-KEY":x.apikey,"Content-Type":"application/json"}});if(!t.ok)throw new Error(t.statusText);const e=await t.json();Object.keys(e).length||(this.shouldLoad=!1),e.forEach((t=>this.cats.push(t)))}catch(t){console.log(t)}}}},Z=F,j=(0,u.Z)(Z,w,C,!1,null,null,null),S=j.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("cats-list",{attrs:{cats:t.favouriteCats}})},T=[],$={name:"FavouriteView",data(){return{favouriteCats:[],start:0,end:19,isLoading:!1,shouldLoad:!0}},components:{CatsList:k},mounted(){this.favouriteCats=(0,b.o)(this.start,this.end),this.scroll()},methods:{scroll(){window.onscroll=()=>{const t=document.documentElement.scrollTop+document.documentElement.clientHeight,e=document.documentElement.scrollHeight,n=e-t;n<1&&this.fetchFavourite()}},async fetchFavourite(){!this.isLoading&&this.shouldLoad&&(this.isLoading=!0,this.start+=20,this.end+=20,await this.getFavouriteCats(),this.isLoading=!1)},getFavouriteCats(){const t=(0,b.o)(this.start,this.end);Object.keys(t).length||(this.shouldLoad=!1),t.forEach((t=>this.favouriteCats.push(t)))}}},H=$,N=(0,u.Z)(H,A,T,!1,null,null,null),J=N.exports;i.Z.use(g.Z);const I=[{path:"/",name:"home",component:S},{path:"/favourite",name:"favourite",component:J}],P=new g.Z({mode:"history",base:"/frontend-challenge/",routes:I});var V=P,G=n(81),B=n(6978),K=n(2739),M=n(9009);G.vI.add(B.m6i,K.m6i),i.Z.component("font-awesome-icon",M.GN),i.Z.config.productionTip=!1,new i.Z({router:V,render:t=>t(m)}).$mount("#app")}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,i,o,a){if(!i){var s=1/0;for(u=0;u<t.length;u++){i=t[u][0],o=t[u][1],a=t[u][2];for(var r=!0,c=0;c<i.length;c++)(!1&a||s>=a)&&Object.keys(n.O).every((function(t){return n.O[t](i[c])}))?i.splice(c--,1):(r=!1,a<s&&(s=a));if(r){t.splice(u--,1);var l=o();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[i,o,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,a,s=i[0],r=i[1],c=i[2],l=0;if(s.some((function(e){return 0!==t[e]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(c)var u=c(n)}for(e&&e(i);l<s.length;l++)a=s[l],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(u)},i=self["webpackChunkcats"]=self["webpackChunkcats"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(6653)}));i=n.O(i)})();
//# sourceMappingURL=app.1d267994.js.map